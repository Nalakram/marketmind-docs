<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>FinTech Architecture: Traditional vs. Evolving Paradigms</title>

  <!-- Tailwind CDN: must run before the DOM is rendered so classes exist immediately -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- Fallback minimal styles so page isn't completely unstyled if Tailwind is blocked -->
  <style>
    html,body{font-family:system-ui,-apple-system,"Segoe UI",Roboto,Arial,sans-serif;margin:0;background:#f8fafc;color:#111}
    .container{max-width:1100px;margin:0 auto;padding:1rem}
    .sr-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border:0}
    /* minimal chart container sizing fallback */
    .chart-container{position:relative;width:100%;max-width:600px;margin-left:auto;margin-right:auto;height:300px;max-height:400px}
    .chart-container-wide{position:relative;width:100%;max-width:800px;margin-left:auto;margin-right:auto;height:400px;max-height:500px}
  </style>

  <!-- Chart.js deferred (safe to defer) -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js" defer></script>
</head>
<body class="bg-gray-100 font-sans leading-relaxed text-gray-800">

  <main class="container mx-auto p-4 md:p-8">
    <header class="text-center mb-12">
      <h1 class="text-4xl md:text-5xl font-bold text-[#004FF9] mb-4">Architectural Paradigms for Self-Evolving FinTech Engines</h1>
      <p class="text-xl text-gray-600 max-w-3xl mx-auto">An analysis of traditional, abstract software architectures versus native evolutionary paradigms for meta-learning-driven prediction systems.</p>
    </header>

    <!-- Core Challenge -->
    <section class="mb-12">
      <h2 class="text-3xl font-bold text-gray-900 mb-4 text-center">The Core Challenge: Stability vs. Adaptivity</h2>
      <p class="text-lg text-gray-700 mb-8 max-w-4xl mx-auto text-center">
        Modern FinTech prediction engines require extreme adaptivity to survive regime shifts. We must determine where traditional, governance-focused architectures end and high-performance, self-evolving systems must begin.
      </p>
      <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
        <div class="bg-white p-6 rounded-lg shadow-md border-l-4 border-[#007BFF]">
          <h3 class="text-2xl font-semibold mb-3">Traditional Abstractions</h3>
          <p class="mb-4">Systems built on factories, dependency injection, plugins, and strategy patterns.</p>
          <ul class="list-disc list-inside space-y-2">
            <li><span class="font-semibold text-green-500">Pros:</span> High stability, auditability, reproducibility, and governance.</li>
            <li><span class="font-semibold text-red-500">Cons:</span> High overhead, interface rigidity, and friction for rapid, structural mutation.</li>
          </ul>
        </div>
        <div class="bg-white p-6 rounded-lg shadow-md border-l-4 border-[#34B3F9]">
          <h3 class="text-2xl font-semibold mb-3">Evolutionary Paradigms</h3>
          <p class="mb-4">Systems built natively for optimization, such as GP, DP, and Generative Code Synthesis.</p>
          <ul class="list-disc list-inside space-y-2">
            <li><span class="font-semibold text-green-500">Pros:</span> Massive search space, high performance, and native support for gradient-based or structural adaptation.</li>
            <li><span class="font-semibold text-red-500">Cons:</span> Can be "black boxes," harder to govern, and risk monolithic complexity.</li>
          </ul>
        </div>
      </div>
    </section>

    <!-- Key Paradigms -->
    <section class="mb-12">
      <h2 class="text-3xl font-bold text-gray-900 mb-4 text-center">Key Evolutionary Paradigms Defined</h2>
      <p class="text-lg text-gray-700 mb-8 max-w-4xl mx-auto text-center">
        These "self-evolving" approaches modify their own internal logic and model pipelines to adapt to new data, moving beyond simple hyperparameter tuning.
      </p>
      <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
        <div class="bg-white p-6 rounded-lg shadow-md">
          <h3 class="text-xl font-semibold text-[#004FF9] mb-2">Genetic Programming (GP)</h3>
          <p>Evolves programs themselves, typically represented as abstract syntax trees (ASTs) or graphs.</p>
        </div>
        <div class="bg-white p-6 rounded-lg shadow-md">
          <h3 class="text-xl font-semibold text-[#004FF9] mb-2">Differentiable Programming (DP)</h3>
          <p>Builds dynamic computation graphs where the entire program structure can be optimized via gradient descent (autodiff).</p>
        </div>
        <div class="bg-white p-6 rounded-lg shadow-md">
          <h3 class="text-xl font-semibold text-[#004FF9] mb-2">Generative Code Synthesis (GCS)</h3>
          <p>Uses LLMs or other generative techniques to write and modify code for feature engineering and modeling pipelines.</p>
        </div>
      </div>
    </section>

    <!-- Hypotheses w/ charts -->
    <section class="mb-12">
      <h2 class="text-3xl font-bold text-gray-900 mb-4 text-center">Central Hypotheses: The Friction Points</h2>
      <p class="text-lg text-gray-700 mb-8 max-w-4xl mx-auto text-center">
        Our research evaluates several key hypotheses about the friction between these two architectural families.
      </p>

      <div class="grid grid-cols-1 md:grid-cols-2 gap-8 items-stretch">
        <div class="bg-white p-6 rounded-lg shadow-md">
          <h3 class="text-xl font-semibold mb-3">H1: Orchestration vs. Inner-Loop Speed</h3>
          <p class="text-gray-700 mb-4">Traditional patterns excel at orchestration but may bottleneck inner-loop evolution.</p>
          <div class="chart-container" style="height:280px;">
            <canvas id="h1RadarChart" aria-label="Hypothesis 1 radar chart" role="img"></canvas>
          </div>
        </div>

        <div class="bg-white p-6 rounded-lg shadow-md">
          <h3 class="text-xl font-semibold mb-3">H4: Governance & Auditability</h3>
          <p class="text-gray-700 mb-4">Traditional patterns are essential for auditability and reproducibility in FinTech.</p>
          <div class="chart-container" style="height:280px;">
            <canvas id="h4BarChart" aria-label="Hypothesis 4 bar chart" role="img"></canvas>
          </div>
        </div>

        <div class="bg-white p-6 rounded-lg shadow-md flex flex-col">
          <h3 class="text-xl font-semibold mb-3">H2: Interface Rigidity vs. Mutation</h3>
          <p class="text-gray-700 mb-4">Rigid interfaces limit structural mutations required by GP.</p>
          <div class="flex flex-col md:flex-row gap-4 justify-center items-stretch flex-grow">
            <div class="text-center p-4 border-2 border-dashed border-gray-300 rounded-lg flex-1 flex flex-col justify-center">
              <h4 class="font-semibold mb-2">Traditional (Rigid)</h4>
              <div class="flex items-center justify-center space-x-2 h-24">
                <div class="font-mono text-lg">Mutation</div>
                <div class="text-3xl text-red-500 font-bold">+</div>
                <div class="p-4 border-2 border-red-500 rounded-lg bg-red-50">
                  <span class="font-mono">IPlugin</span>
                </div>
              </div>
              <p class="mt-2 text-sm text-red-600">Mutation Rejected by Rigid Interface</p>
            </div>
            <div class="text-center p-4 border-2 border-dashed border-gray-300 rounded-lg flex-1 flex flex-col justify-center">
              <h4 class="font-semibold mb-2">Evolutionary (Flexible)</h4>
              <div class="flex items-center justify-center space-x-2 h-24">
                <div class="font-mono text-lg">Mutation</div>
                <div class="text-3xl text-green-500 font-bold">→</div>
                <div class="p-4 border-2 border-dashed border-green-500 rounded-lg bg-green-50">
                  <span class="font-mono">AST Node</span>
                </div>
              </div>
              <p class="mt-2 text-sm text-green-600">Structural Mutation Applied</p>
            </div>
          </div>
        </div>

        <div class="bg-white p-6 rounded-lg shadow-md flex flex-col">
          <h3 class="text-xl font-semibold mb-3">H3: Autodiff Across Plugin Boundaries</h3>
          <p class="text-gray-700 mb-4">Gradient flow can break at classical plugin boundaries, complicating DP.</p>
          <div class="flex flex-col md:flex-row gap-4 justify-center items-stretch flex-grow">
            <div class="text-center p-4 border-2 border-dashed border-gray-300 rounded-lg flex-1 flex flex-col justify-center">
              <h4 class="font-semibold mb-2">Traditional (DI)</h4>
              <div class="flex items-center justify-center space-x-1 h-24">
                <div class="p-4 border border-gray-400 rounded-lg"><span class="font-mono">Module A</span></div>
                <div class="text-3xl text-red-500 font-bold p-2">✖</div>
                <div class="p-4 border border-gray-400 rounded-lg"><span class="font-mono">Module B</span></div>
              </div>
              <p class="mt-2 text-sm text-red-600">Gradient Flow Broken at Boundary</p>
            </div>
            <div class="text-center p-4 border-2 border-dashed border-gray-300 rounded-lg flex-1 flex flex-col justify-center">
              <h4 class="font-semibold mb-2">Evolutionary (DP)</h4>
              <div class="flex items-center justify-center space-x-1 h-24">
                <div class="p-4 border border-gray-400 rounded-lg"><span class="font-mono">Op A</span></div>
                <div class="text-3xl text-green-500 font-bold">→</div>
                <div class="p-4 border border-gray-400 rounded-lg"><span class="font-mono">Op B</span></div>
              </div>
              <p class="mt-2 text-sm text-green-600">Unbroken Gradient Flow</p>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Evaluation Dimensions -->
    <section class="mb-12">
      <h2 class="text-3xl font-bold text-gray-900 mb-4 text-center">Evaluation Dimensions</h2>
      <p class="text-lg text-gray-700 mb-8 max-w-4xl mx-auto text-center">
        Two prototype systems will be compared across quantitative and qualitative metrics.
      </p>

      <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-5 gap-4">
        <div class="bg-white p-4 rounded-lg shadow-md">
          <h3 class="font-semibold text-lg text-[#007BFF]">Model/Trading</h3>
          <ul class="list-disc list-inside text-sm mt-2 space-y-1">
            <li>Sharpe Ratio</li><li>Max Drawdown</li><li>Turnover</li><li>Regime Recovery</li>
          </ul>
        </div>
        <div class="bg-white p-4 rounded-lg shadow-md">
          <h3 class="font-semibold text-lg text-[#007BFF]">Adaptivity</h3>
          <ul class="list-disc list-inside text-sm mt-2 space-y-1">
            <li>Time-to-Improvement</li><li>Search Depth / Time</li><li>Model Novelty</li>
          </ul>
        </div>
        <div class="bg-white p-4 rounded-lg shadow-md">
          <h3 class="font-semibold text-lg text-[#007BFF]">Systems</h3>
          <ul class="list-disc list-inside text-sm mt-2 space-y-1">
            <li>Inference Latency (p95)</li><li>Training Throughput</li><li>Experiment Cost</li>
          </ul>
        </div>
        <div class="bg-white p-4 rounded-lg shadow-md">
          <h3 class="font-semibold text-lg text-[#007BFF]">Governance</h3>
          <ul class="list-disc list-inside text-sm mt-2 space-y-1">
            <li>Reproducibility</li><li>Lineage Tracking</li><li>Audit Completeness</li>
          </ul>
        </div>
        <div class="bg-white p-4 rounded-lg shadow-md">
          <h3 class="font-semibold text-lg text-[#007BFF]">Complexity</h3>
          <ul class="list-disc list-inside text-sm mt-2 space-y-1">
            <li>Cognitive Load</li><li>Dependency Coupling</li><li>Change Blast Radius</li>
          </ul>
        </div>
      </div>
    </section>

    <!-- Prototype Architectures -->
    <section class="mb-12">
      <h2 class="text-3xl font-bold text-gray-900 mb-4 text-center">Prototype Architectures</h2>
      <p class="text-lg text-gray-700 mb-8 max-w-4xl mx-auto text-center">
        Two competing prototypes will be implemented to test the hypotheses.
      </p>

      <div class="grid grid-cols-1 md:grid-cols-2 gap-8 items-stretch">
        <div class="bg-white p-6 rounded-lg shadow-md flex flex-col">
          <h3 class="text-xl font-semibold mb-4">Prototype A: Traditional-First</h3>
          <p class="text-gray-700 mb-6">Classical plugin/factory pattern; evolution simulated by swapping pre-defined components.</p>
          <div class="flex flex-col items-center p-4 border-2 border-dashed border-gray-300 rounded-lg min-h-[350px] flex-grow">
            <div class="p-4 bg-gray-200 text-gray-800 rounded-lg shadow font-mono text-center">Orchestration Service</div>
            <div class="h-8 w-1 border-l-2 border-gray-400"></div>
            <div class="p-4 bg-[#007BFF] text-white rounded-lg shadow font-mono text-center">Component Factory</div>
            <div class="h-8 w-1 border-l-2 border-gray-400"></div>
            <div class="w-full max-w-xs border-t-2 border-gray-400"></div>
            <div class="w-full max-w-xs grid grid-cols-3 gap-2 mt-2">
              <div class="flex flex-col items-center">
                <div class="w-1 h-8 border-l-2 border-gray-400"></div>
                <div class="p-3 bg-white border border-gray-400 rounded-lg shadow-sm font-mono text-sm">Plugin A</div>
              </div>
              <div class="flex flex-col items-center">
                <div class="w-1 h-8 border-l-2 border-gray-400"></div>
                <div class="p-3 bg-white border border-gray-400 rounded-lg shadow-sm font-mono text-sm">Plugin B</div>
              </div>
              <div class="flex flex-col items-center">
                <div class="w-1 h-8 border-l-2 border-gray-400"></div>
                <div class="p-3 bg-white border border-gray-400 rounded-lg shadow-sm font-mono text-sm">Plugin C</div>
              </div>
            </div>
            <p class="mt-auto pt-4 text-sm text-gray-600">Evolution = Swapping Plugins</p>
          </div>
        </div>

        <div class="bg-white p-6 rounded-lg shadow-md flex flex-col">
          <h3 class="text-xl font-semibold mb-4">Prototype B: Evolution-First</h3>
          <p class="text-gray-700 mb-6">Monolithic process with mutable program IR; evolution at low level guided by a meta-learning loop.</p>
          <div class="flex flex-col items-center p-4 border-2 border-dashed border-gray-300 rounded-lg min-h-[350px] flex-grow justify-center">
            <div class="flex flex-col items-center space-y-3">
              <div class="p-4 bg-green-200 border border-green-600 rounded-lg shadow font-mono text-sm">Meta-Learning Loop</div>
              <div class="text-3xl text-green-600">↓</div>
              <div class="font-mono text-sm text-gray-700">Applies Mutation/Gradient</div>
              <div class="text-3xl text-green-600">↓</div>
              <div class="p-4 bg-white border-2 border-green-500 rounded-lg shadow-inner font-mono">Evolving Program (AST / IR)</div>
              <div class="text-3xl text-green-600">↓</div>
              <div class="font-mono text-sm text-gray-700">Evaluate Performance</div>
              <div class="text-3xl text-green-600 transform rotate-180">⤴</div>
            </div>
            <p class="mt-auto pt-4 text-sm text-gray-600">Evolution = Modifying Program IR</p>
          </div>
        </div>
      </div>
    </section>

    <!-- Synthesized Scorecard -->
    <section class="mb-12">
      <h2 class="text-3xl font-bold text-gray-900 mb-4 text-center">Synthesized Scorecard</h2>
      <p class="text-lg text-gray-700 mb-8 max-w-4xl mx-auto text-center">After benchmarking both prototypes, a final scorecard summarizes the findings.</p>
      <div class="bg-white p-6 rounded-lg shadow-md">
        <div class="chart-container-wide" style="height:360px;">
          <canvas id="scorecardChart" aria-label="Synthesized scorecard chart" role="img"></canvas>
        </div>
      </div>
    </section>

    <!-- Gemini-Powered Scenario Analysis -->
    <section class="mb-12">
      <h2 class="text-3xl font-bold text-gray-900 mb-4 text-center">✨ Gemini-Powered Scenario Analysis</h2>
      <p class="text-lg text-gray-700 mb-8 max-w-4xl mx-auto text-center">
        Enter a hypothetical market event to see comparative responses from Prototype A and B.
      </p>
      <div class="bg-white p-6 rounded-lg shadow-md max-w-4xl mx-auto">
        <form id="scenarioForm" class="flex flex-col sm:flex-row gap-4 mb-4" onsubmit="return false;" aria-labelledby="scenarioLabel">
          <label id="scenarioLabel" class="sr-only">Market scenario</label>
          <input type="text" id="scenarioInput" class="flex-grow border border-gray-300 rounded-lg p-3 focus:ring-2 focus:ring-[#007BFF] outline-none" placeholder="e.g., 'Sudden high-volatility shock'" aria-label="Market scenario" />
          <button id="analyzeButton" class="bg-[#007BFF] text-white font-bold py-3 px-6 rounded-lg hover:bg-[#0056b3] transition-colors duration-200" aria-controls="analysisOutput" aria-busy="false">Analyze Scenario</button>
        </form>

        <div id="loadingIndicator" class="text-center py-4 hidden" aria-hidden="true">
          <div class="animate-spin rounded-full h-8 w-8 border-b-2 border-[#007BFF] mx-auto"></div>
          <p class="mt-2 text-gray-600">Analyzing…</p>
        </div>

        <div id="errorDisplay" class="text-red-600 p-4 bg-red-50 rounded-lg hidden" role="alert" aria-live="assertive"></div>

        <div id="analysisOutput" class="text-gray-800 p-4 border-t border-gray-200 mt-4 prose hidden" role="status" aria-live="polite"></div>
      </div>
    </section>
  </main>

  <footer class="text-center p-8 text-gray-500 border-t border-gray-200">
    <p>Infographic by Canvas Infographics. This analysis is based on the provided research plan comparing traditional and evolutionary software architectures.</p>
  </footer>

  <!-- Application script (module, executes after parsing; Chart.js is deferred so should be available) -->
  <script type="module">
    // Defensive architecture-focused inline comments only.

    // DOM helpers
    const $ = (sel, ctx = document) => ctx.querySelector(sel);
    const show = el => el && el.classList.remove('hidden');
    const hide = el => el && el.classList.add('hidden');

    // Cached refs
    const analyzeButton = $('#analyzeButton');
    const scenarioInput = $('#scenarioInput');
    const loadingIndicator = $('#loadingIndicator');
    const errorDisplay = $('#errorDisplay');
    const analysisOutput = $('#analysisOutput');

    // Chart init wrappers -> guard Chart availability and catch runtime errors
    function safeInit(fn) {
      try {
        if (typeof Chart === 'undefined') { console.warn('Chart.js not available yet'); return; }
        fn();
      } catch (err) {
        console.error('Chart init error:', err);
      }
    }

    // small label wrapper
    const wrapLabel = (label, maxWidth = 16) => {
      if (!label) return [label];
      if (label.length <= maxWidth) return [label];
      const words = label.split(' ');
      const lines = [];
      let cur = '';
      for (const w of words) {
        if ((cur + ' ' + w).trim().length > maxWidth && cur.length > 0) { lines.push(cur); cur = w; }
        else { cur = (cur + ' ' + w).trim(); }
      }
      if (cur.length) lines.push(cur);
      return lines;
    };

    // tooltip helper
    const tooltipTitleCallback = (tooltipItems) => {
      const it = tooltipItems[0];
      const label = it.chart.data.labels[it.dataIndex];
      return Array.isArray(label) ? label.join(' ') : label;
    };

    // chart constructors (background opacity increased to 0.35 for stronger fills)
    function initRadarChart() {
      const el = document.getElementById('h1RadarChart');
      if (!el) return;
      safeInit(() => {
        new Chart(el, {
          type: 'radar',
          data: {
            labels: ['Orchestration','Governance','Inner-Loop Evolution','Search Space'],
            datasets: [
              { label: 'Traditional Arch', data: [9,9,2,3], backgroundColor: 'rgba(0,123,255,0.35)', borderColor: 'rgba(0,123,255,1)', borderWidth: 2 },
              { label: 'Evolutionary Arch', data: [3,4,9,9], backgroundColor: 'rgba(52,179,249,0.35)', borderColor: 'rgba(52,179,249,1)', borderWidth: 2 }
            ]
          },
          options: { maintainAspectRatio:false,responsive:true,plugins:{ tooltip:{ callbacks:{ title: tooltipTitleCallback } }, legend:{ position:'bottom' } }, scales:{ r:{ beginAtZero:true, max:10 } } }
        });
      });
    }

    function initH4Bar() {
      const el = document.getElementById('h4BarChart');
      if (!el) return;
      safeInit(() => {
        new Chart(el, {
          type: 'bar',
          data: {
            labels: ['Auditability','Reproducibility','Lineage Tracking'],
            datasets: [
              { label: 'Traditional', data: [9,8,7], backgroundColor: 'rgba(0,123,255,0.35)', borderColor: 'rgba(0,123,255,1)' },
              { label: 'Evolutionary', data: [4,5,6], backgroundColor: 'rgba(52,179,249,0.35)', borderColor: 'rgba(52,179,249,1)' }
            ]
          },
          options: { maintainAspectRatio:false,responsive:true,indexAxis:'y',scales:{ x:{ beginAtZero:true, max:10 } }, plugins:{ tooltip:{ callbacks:{ title: tooltipTitleCallback } }, legend:{ position:'bottom' } } }
        });
      });
    }

    function initScorecard() {
      const el = document.getElementById('scorecardChart');
      if (!el) return;
      safeInit(() => {
        const labels = ['Model Performance','Adaptivity','System Latency','Governance','Cognitive Load'].map(l => wrapLabel(l));
        new Chart(el, {
          type: 'bar',
          data: {
            labels,
            datasets: [
              { label: 'Prototype A (Traditional)', data: [6,3,3,9,7], backgroundColor: 'rgba(0,123,255,0.35)', borderColor: 'rgba(0,123,255,1)' },
              { label: 'Prototype B (Evolutionary)', data: [8,9,8,4,5], backgroundColor: 'rgba(52,179,249,0.35)', borderColor: 'rgba(52,179,249,1)' }
            ]
          },
          options: { maintainAspectRatio:false,responsive:true,scales:{ y:{ beginAtZero:true, max:10, title:{ display:true, text:'Score (out of 10)' } } }, plugins:{ tooltip:{ callbacks:{ title: tooltipTitleCallback } }, legend:{ position:'bottom' } } }
        });
      });
    }

    // only call chart initializers once DOM is ready; Chart.js is deferred so it should be available
    window.addEventListener('DOMContentLoaded', () => {
      try {
        initRadarChart();
        initH4Bar();
        initScorecard();
      } catch (err) {
        console.error('Chart setup failed:', err);
      }

      // Scenario analysis UI
      if (!analyzeButton || !scenarioInput) return;

      const setBusy = (b) => {
        if (analyzeButton) analyzeButton.disabled = b;
        if (analyzeButton) analyzeButton.setAttribute('aria-busy', String(b));
        if (b) { show(loadingIndicator); hide(errorDisplay); hide(analysisOutput); } else hide(loadingIndicator);
      };

      const showError = (msg) => {
        if (!errorDisplay) return;
        errorDisplay.textContent = msg;
        show(errorDisplay);
      };

      const analyzeScenario = async () => {
        const scenario = scenarioInput.value?.trim();
        if (!scenario) { showError('Please enter a scenario to analyze.'); return; }

        setBusy(true);

        try {
          // SECURITY: Do not call provider APIs from the browser with keys.
          // Replace '/api/analyze-scenario' with your server-side proxy that calls the LLM.
          const resp = await fetch('/api/analyze-scenario', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({ scenario })
          });

          if (!resp.ok) throw new Error(`Server returned ${resp.status}`);
          const json = await resp.json();
          const text = json?.analysis || json?.message || null;
          if (!text) throw new Error('No analysis returned from server.');

          // render sanitized result (assume server returns safe HTML or plain text)
          analysisOutput.innerHTML = text.replace(/\n/g, '<br>');
          show(analysisOutput);
        } catch (err) {
          console.error('Analysis error:', err);
          showError(`An error occurred: ${err.message}`);
        } finally {
          setBusy(false);
        }
      };

      analyzeButton.addEventListener('click', analyzeScenario);
      scenarioInput.addEventListener('keydown', (e) => { if (e.key === 'Enter') { e.preventDefault(); analyzeScenario(); } });
    });
  </script>
</body>
</html>
