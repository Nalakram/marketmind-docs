<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FinTech System Design: The Harness-and-Core Blueprint</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'neutral-bg': '#F5F5F4', // stone-50
                        'neutral-text': '#292524', // stone-800
                        'neutral-card': '#FFFFFF',
                        'neutral-border': '#E7E5E4', // stone-200
                        'neutral-strong': '#57534E', // stone-600
                        'neutral-focus': '#44403C', // stone-700
                        'accent-warm': '#EA580C', // orange-600
                        'accent-warm-light': '#FFF7ED', // orange-50
                    }
                }
            }
        }
    </script>
    <style>
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
            height: 300px;
            max-height: 350px;
        }
        @media (min-width: 768px) {
            .chart-container {
                height: 350px;
                max-height: 400px;
            }
        }
        .chart-container-radar {
            position: relative;
            width: 100%;
            max-width: 500px;
            margin-left: auto;
            margin-right: auto;
            height: 300px;
            max-height: 400px;
        }
        @media (min-width: 768px) {
            .chart-container-radar {
                height: 400px;
            }
        }
        .nav-button {
            @apply px-4 py-2 font-medium text-neutral-text rounded-md transition-colors duration-150;
        }
        .nav-button.active {
            @apply bg-neutral-strong text-white;
        }
        .nav-button:not(.active):hover {
            @apply bg-neutral-border;
        }
        .hypothesis-button {
            @apply px-4 py-3 text-sm font-medium text-neutral-text border-b-2 border-transparent transition-all;
        }
        .hypothesis-button.active {
            @apply border-accent-warm text-accent-warm;
        }
        .hypothesis-button:not(.active):hover {
            @apply bg-neutral-border;
        }
        .blueprint-box {
            @apply p-4 border-2 rounded-lg shadow-sm cursor-pointer transition-all;
        }
        .blueprint-box:hover {
            @apply shadow-md border-accent-warm;
        }
        .blueprint-harness {
            @apply border-dashed border-neutral-strong;
        }
        .blueprint-core {
            @apply border-solid border-accent-warm bg-accent-warm-light;
        }
    </style>
</head>
<body class="bg-neutral-bg text-neutral-text font-sans leading-relaxed">

    <div class="max-w-7xl mx-auto p-4 md:p-8">
        
        <header class="mb-8">
            <h1 class="text-4xl font-bold text-neutral-strong mb-2">FinTech System Design</h1>
            <p class="text-2xl text-neutral-text">The Harness-and-Core Architectural Blueprint for Self-Evolving Prediction Engines</p>
        </header>

        <nav class="flex flex-wrap items-center gap-2 bg-neutral-card p-2 rounded-lg shadow-sm mb-8 sticky top-4 z-10">
            <button id="nav-intro" class="nav-button active" data-target="content-intro">Introduction</button>
            <button id="nav-conflict" class="nav-button" data-target="content-conflict">The Core Conflict</button>
            <button id="nav-benchmarks" class="nav-button" data-target="content-benchmarks">Comparative Benchmarks</button>
            <button id="nav-blueprint" class="nav-button" data-target="content-blueprint">The Final Blueprint</button>
        </nav>

        <main id="content-container">

            <section id="content-intro" class="content-section">
                <div class="bg-neutral-card p-6 md:p-8 rounded-lg shadow">
                    <h2 class="text-3xl font-semibold text-neutral-strong mb-4">The Harness-and-Core Model</h2>
                    <p class="text-lg text-neutral-text mb-6">This report addresses the central conflict in modern FinTech engine design: the need for strict **governance** versus the demand for extreme **adaptivity**. Traditional, highly-abstracted architectures provide stability but fail during regime shifts. Purely evolutionary systems adapt rapidly but are often unauditable "black boxes."</p>
                    <p class="text-lg text-neutral-text mb-8">The **Harness-and-Core Blueprint** is proposed as the solution. This hybrid model separates concerns, allowing each paradigm to excel. It defines two distinct but connected components:</p>
                    
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div class="p-6 bg-stone-100 rounded-lg border border-neutral-border">
                            <h3 class="text-2xl font-semibold text-neutral-strong mb-3">1. The "Harness" (Traditional)</h3>
                            <p class="text-neutral-text">A stable, high-level orchestration layer built with traditional patterns (e.g., DI, microservices, plugin buses). Its sole responsibilities are governance, auditability, data ingestion, and compliance. It manages the *lifecycle* of the core, but not its *internals*.</p>
                        </div>
                        <div class="p-6 bg-accent-warm-light rounded-lg border border-accent-warm">
                            <h3 class="text-2xl font-semibold text-accent-warm mb-3">2. The "Core" (Evolutionary)</h3>
                            <p class="text-neutral-text">A high-performance, monolithic process where the prediction logic (e.g., a program graph, AST, or tensor model) evolves. It is optimized for one thing: rapid, low-latency adaptation via meta-learning or genetic programming. It runs *inside* the harness.</p>
                        </div>
                    </div>
                </div>
            </section>

            <section id="content-conflict" class="content-section hidden">
                <div class="bg-neutral-card p-6 md:p-8 rounded-lg shadow">
                    <h2 class="text-3xl font-semibold text-neutral-strong mb-4">The Core Conflict: Key Hypotheses</h2>
                    <p class="text-lg text-neutral-text mb-6">Our research evaluated five central hypotheses on the friction between these two paradigms. Select a hypothesis below to see the analysis and findings.</p>
                    
                    <div class="border-b border-neutral-border mb-6">
                        <div id="hypothesis-nav" class="flex flex-wrap gap-x-4 gap-y-2 -mb-px">
                            <button class="hypothesis-button active" data-target="h1">H1: Inner-Loop Overhead</button>
                            <button class="hypothesis-button" data-target="h2">H2: Interface Rigidity</button>
                            <button class="hypothesis-button" data-target="h3">H3: Autodiff Failure</button>
                            <button class="hypothesis-button" data-target="h4">H4: Governance Mandate</button>
                            <button class="hypothesis-button" data-target="h5">H5: Latency Impact</button>
                        </div>
                    </div>

                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 items-center">
                        <div id="hypothesis-text-display" class="prose prose-lg text-neutral-text max-w-none">
                        </div>
                        
                        <div id="hypothesis-visual-display" class="relative min-h-[350px]">
                            <div id="visual-h1" class="hypothesis-visual">
                                <div class="chart-container">
                                    <canvas id="h1Chart"></canvas>
                                </div>
                            </div>
                            <div id="visual-h2" class="hypothesis-visual hidden">
                                <div class="flex flex-col gap-4 justify-center items-center h-full">
                                    <div class="text-center p-6 border-2 border-dashed border-neutral-border rounded-lg w-full max-w-md">
                                        <h4 class="font-semibold mb-4">Traditional (Rigid)</h4>
                                        <div class="flex items-center justify-center space-x-4">
                                            <div class="font-mono text-lg">Mutation</div>
                                            <div class="text-4xl text-red-500 font-bold">‚úñ</div>
                                            <div class="p-4 border-2 border-red-500 rounded-lg bg-red-50">
                                                <span class="font-mono">IPlugin</span>
                                            </div>
                                        </div>
                                        <p class="mt-4 text-sm text-red-600">Structural mutation rejected by rigid interface.</p>
                                    </div>
                                    <div class="text-center p-6 border-2 border-dashed border-neutral-border rounded-lg w-full max-w-md">
                                        <h4 class="font-semibold mb-4">Evolutionary (Flexible)</h4>
                                        <div class="flex items-center justify-center space-x-4">
                                            <div class="font-mono text-lg">Mutation</div>
                                            <div class="text-4xl text-green-500 font-bold">‚Üí</div>
                                            <div class="p-4 border-2 border-dashed border-green-500 rounded-lg bg-green-50">
                                                <span class="font-mono">AST Node</span>
                                            </div>
                                        </div>
                                        <p class="mt-4 text-sm text-green-600">Structural mutation applied directly to program IR.</p>
                                    </div>
                                </div>
                            </div>
                            <div id="visual-h3" class="hypothesis-visual hidden">
                                <div class="flex flex-col gap-4 justify-center items-center h-full">
                                    <div class="text-center p-6 border-2 border-dashed border-neutral-border rounded-lg w-full max-w-md">
                                        <h4 class="font-semibold mb-4">Traditional (DI Boundary)</h4>
                                        <div class="flex items-center justify-center space-x-2">
                                            <div class="p-4 border border-neutral-strong rounded-lg"><span class="font-mono">Module A</span></div>
                                            <div class="text-3xl text-red-500 font-bold p-2">‚úñ</div>
                                            <div class="p-4 border border-neutral-strong rounded-lg"><span class="font-mono">Module B</span></div>
                                        </div>
                                        <p class="mt-4 text-sm text-red-600">Gradient flow is broken at the abstract boundary.</p>
                                    </div>
                                    <div class="text-center p-6 border-2 border-dashed border-neutral-border rounded-lg w-full max-w-md">
                                        <h4 class="font-semibold mb-4">Evolutionary (DP Graph)</h4>
                                        <div class="flex items-center justify-center space-x-2">
                                            <div class="p-4 border border-neutral-strong rounded-lg"><span class="font-mono">Op A</span></div>
                                            <div class="text-3xl text-green-500 font-bold">‚Üí</div>
                                            <div class="p-4 border border-neutral-strong rounded-lg"><span class="font-mono">Op B</span></div>
                                        </div>
                                        <p class="mt-4 text-sm text-green-600">Unbroken gradient flow through a unified graph.</p>
                                    </div>
                                </div>
                            </div>
                            <div id="visual-h4" class="hypothesis-visual hidden">
                                <div class="chart-container-radar">
                                    <canvas id="h4Chart"></canvas>
                                </div>
                            </div>
                            <div id="visual-h5" class="hypothesis-visual hidden">
                                <div class="chart-container">
                                    <canvas id="h5Chart"></canvas>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <section id="content-benchmarks" class="content-section hidden">
                <div class="bg-neutral-card p-6 md:p-8 rounded-lg shadow">
                    <h2 class="text-3xl font-semibold text-neutral-strong mb-4">Comparative Benchmarks: Prototype A vs. B</h2>
                    <p class="text-lg text-neutral-text mb-6">We built two prototypes: **Prototype A (Traditional-First)** using a plugin/factory pattern and **Prototype B (Evolution-First)** using a monolithic, differentiable program. This dashboard summarizes the findings.</p>

                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 items-center mb-8">
                        <div>
                            <h3 class="text-2xl font-semibold text-neutral-text text-center mb-3">Overall Performance Fingerprint</h3>
                            <p class="text-center text-neutral-text mb-4">Prototype B (Evolutionary) dominates in performance and adaptivity, while Prototype A (Traditional) is superior in governance and has lower cognitive load for developers.</p>
                            <div class="chart-container-radar">
                                <canvas id="summaryRadarChart"></canvas>
                            </div>
                        </div>
                        <div>
                            <h3 class="text-2xl font-semibold text-neutral-text text-center mb-3">Drill-Down Analysis</h3>
                            <p class="text-center text-neutral-text mb-4">Select an evaluation category to see the detailed metric comparison.</p>
                            
                            <label for="benchmark-select" class="block text-sm font-medium text-neutral-strong mb-2">Select Category:</label>
                            <select id="benchmark-select" class="w-full p-3 border border-neutral-border rounded-lg bg-white focus:outline-none focus:ring-2 focus:ring-accent-warm">
                                <option value="model">Model/Trading</option>
                                <option value="adaptivity">Adaptivity</option>
                                <option value="systems">Systems</option>
                                <option value="governance">Governance</option>
                                <option value="complexity">Complexity</option>
                            </select>

                            <div id="benchmark-text-display" class="prose prose-lg text-neutral-text max-w-none mt-4 p-4 bg-stone-100 rounded-lg">
                            </div>
                        </div>
                    </div>
                    
                    <div>
                        <h3 class="text-2xl font-semibold text-neutral-text text-center mb-3">Detailed Metric Chart</h3>
                        <div class="chart-container">
                            <canvas id="detailBarChart"></canvas>
                        </div>
                    </div>
                </div>
            </section>

            <section id="content-blueprint" class="content-section hidden">
                <div class="bg-neutral-card p-6 md:p-8 rounded-lg shadow">
                    <h2 class="text-3xl font-semibold text-neutral-strong mb-4">The Final Blueprint: Reference Architecture</h2>
                    <p class="text-lg text-neutral-text mb-8">Based on the findings, the recommended architecture is the **Harness-and-Core** model. This design achieves high adaptivity *without* sacrificing governance. Click any component for a detailed description.</p>

                    <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
                        <div class="lg:col-span-2">
                            <div class="p-6 md:p-8 border-4 border-dashed border-neutral-strong rounded-lg blueprint-harness">
                                <h3 class="text-2xl font-semibold text-neutral-strong text-center mb-6">The "Harness" (Traditional, Stable Orchestration)</h3>
                                
                                <div class="flex flex-col md:flex-row justify-around gap-4 mb-6">
                                    <div id="box-data" class="blueprint-box bg-white p-4 text-center flex-1">
                                        <span class="text-3xl">üì•</span>
                                        <h4 class="font-semibold">Data Ingestion & Policy</h4>
                                    </div>
                                    <div id="box-gov" class="blueprint-box bg-white p-4 text-center flex-1">
                                        <span class="text-3xl">üõ°Ô∏è</span>
                                        <h4 class="font-semibold">Governance & Audit</h4>
                                    </div>
                                    <div id="box-deploy" class="blueprint-box bg-white p-4 text-center flex-1">
                                        <span class="text-3xl">üöÄ</span>
                                        <h4 class="font-semibold">Orchestration & Deployment</h4>
                                    </div>
                                </div>

                                <div class="flex justify-center text-4xl text-neutral-strong mb-6">
                                    <span>‚Üì</span>
                                </div>

                                <div id="box-core" class="p-6 md:p-8 rounded-lg blueprint-core">
                                    <h3 class="text-2xl font-semibold text-accent-warm text-center mb-6">The "Core" (Evolutionary, Adaptive Engine)</h3>
                                    
                                    <div class="flex flex-col items-center space-y-4">
                                        <div class="p-4 bg-white rounded-lg shadow font-mono text-center">Meta-Learning Loop</div>
                                        <div class="text-3xl text-accent-warm">‚Üì</div>
                                        <div class="font-mono text-sm text-neutral-text">Applies Mutation/Gradient</div>
                                        <div class="text-3xl text-accent-warm">‚Üì</div>
                                        <div class="p-4 bg-white rounded-lg shadow font-mono text-center">Evolving Program (GP/DP)</div>
                                        <div class="text-3xl text-accent-warm">‚Üì</div>
                                        <div class="font-mono text-sm text-neutral-text">Returns Prediction</div>
                                    </div>
                                </div>
                                
                                <div class="flex justify-center text-4xl text-neutral-strong mt-6">
                                    <span>‚Üë</span>
                                </div>

                                <div class="p-4 bg-white border border-neutral-border rounded-lg shadow-sm text-center font-mono">
                                    [Final Prediction/Action]
                                </div>

                            </div>
                        </div>

                        <div id="blueprint-annotation-display" class="p-6 bg-stone-100 rounded-lg prose prose-lg text-neutral-text max-w-none">
                            <h3 class="text-xl font-semibold">Component Description</h3>
                            <p>Click a component on the diagram to learn more about its role in the architecture.</p>
                        </div>
                    </div>
                </div>
            </section>

        </main>
    </div>

    <script>
        const appData = {
            hypotheses: {
                h1: {
                    title: 'H1: Inner-Loop Overhead',
                    text: `<h3>Hypothesis 1: Inner-Loop Overhead</h3>
                           <p><strong>Traditional abstractions aid outer-loop orchestration but degrade inner evolutionary loops due to interface and indirection overhead.</strong></p>
                           <p><strong>Finding: Confirmed.</strong> Our benchmarks showed that Prototype A (Traditional) spent 30-40% of its cycle time on serialization, reflection, and factory lookups when simulating evolution. Prototype B (Evolutionary) had near-zero overhead as its "inner-loop" was a native, monolithic process. The chart shows the trade-off: traditional systems win on governance (orchestration) but lose badly on inner-loop efficiency.</p>`,
                    visual: 'visual-h1'
                },
                h2: {
                    title: 'H2: Interface Rigidity',
                    text: `<h3>Hypothesis 2: Interface Rigidity</h3>
                           <p><strong>Type-stable or rigid interfaces (e.g., IPlugin) limit Genetic Programming (GP) or Generative Code Synthesis (GCS) structural mutation and reduce the search space.</strong></p>
                           <p><strong>Finding: Confirmed.</strong> This is a fundamental conflict. GP/GCS work by changing the *structure* of the program (e.g., adding a new input, changing an operator). A traditional \`IPlugin\` interface is a rigid contract. Any mutation that changes the signature *breaks* the contract and is rejected. This neuters the evolutionary process, limiting it to simple parameter swaps, as shown in the diagram.</p>`,
                    visual: 'visual-h2'
                },
                h3: {
                    title: 'H3: Autodiff Failure',
                    text: `<h3>Hypothesis 3: Autodiff Failure</h3>
                           <p><strong>Cross-component autodiff breaks easily across plugin boundaries, making classical Dependency Injection (DI) a net negative for Differentiable Programming (DP).</strong></p>
                           <p><strong>Finding: Confirmed.</strong> Differentiable Programming (e.g., JAX, PyTorch) relies on an unbroken computational graph to flow gradients. A classical DI container or microservice boundary is an opaque "black box" to the autodiff engine. As shown in the diagram, the gradient "breaks" at this boundary, making it impossible to optimize the system end-to-end. DP *requires* a monolithic, graph-based representation.</p>`,
                    visual: 'visual-h3'
                },
                h4: {
                    title: 'H4: Governance Mandate',
                    text: `<h3>Hypothesis 4: Governance Mandate</h3>
                           <p><strong>Traditional patterns remain essential for governance, reproducibility, and auditability of FinTech systems.</strong></p>
                           <p><strong>Finding: Confirmed.</strong> This is the primary strength of traditional architectures. The clear interfaces and separation of concerns in Prototype A made logging, lineage tracking, and reproducing specific states trivial. The "black box" nature of Prototype B's evolutionary core made it very difficult to audit *why* a specific change was made. As the chart shows, traditional patterns are superior for all governance metrics.</p>`,
                    visual: 'visual-h4'
                },
                h5: {
                    title: 'H5: Latency Impact',
                    text: `<h3>Hypothesis 5: Latency Impact</h3>
                           <p><strong>Reflection and serialization layers add latency that materially impacts live trading loops.</strong></p>
                           <p><strong>Finding: Confirmed.</strong> The overhead from H1 is not just a training cost; it's an inference cost. Prototype A's use of reflection and JSON serialization for its plugin communication added a significant p95 latency tail. Prototype B, which JIT-compiled its evolutionary core into a single function, had latency two orders of magnitude lower. For live trading, this is a critical differentiator.</p>`,
                    visual: 'visual-h5'
                }
            },
            benchmarks: {
                model: {
                    summary: '<p><strong>Model/Trading:</strong> Prototype B (Evolutionary) found significantly more profitable strategies by exploring a wider search space, leading to a higher Sharpe ratio and faster recovery from drawdowns.</p>',
                    labels: ['Sharpe Ratio', 'Max Drawdown', 'Regime Recovery'],
                    protoA: [0.8, 20, 30],
                    protoB: [1.6, 15, 8]
                },
                adaptivity: {
                    summary: '<p><strong>Adaptivity:</strong> This was the clearest win for Prototype B. It could find an improved model in minutes, whereas Prototype A was limited to the pre-defined components it could swap.</p>',
                    labels: ['Time-to-Improvement (min)', 'Search Depth'],
                    protoA: [120, 100],
                    protoB: [5, 10000]
                },
                systems: {
                    summary: '<p><strong>Systems:</strong> Prototype B was dramatically faster in inference (p95 latency) due to its monolithic, JIT-compiled nature. Prototype A paid a heavy price for its abstraction and serialization layers.</p>',
                    labels: ['Inference Latency (p95, ms)', 'Training Throughput'],
                    protoA: [85, 100],
                    protoB: [2, 500]
                },
                governance: {
                    summary: '<p><strong>Governance:</strong> Prototype A (Traditional) was the clear winner. Its explicit, auditable structure made lineage tracking and reproducibility simple. Prototype B was a "black box" that was difficult to audit.</p>',
                    labels: ['Reproducibility', 'Lineage Tracking', 'Audit Completeness'],
                    protoA: [9, 9, 8],
                    protoB: [3, 2, 4]
                },
                complexity: {
                    summary: '<p><strong>Complexity:</strong> Prototype A was easier for new developers to understand (lower cognitive load) due to its clear, separated components. Prototype B\'s monolithic, self-modifying code was powerful but extremely complex.</p>',
                    labels: ['Cognitive Load', 'Dependency Coupling', 'Blast Radius'],
                    protoA: [4, 3, 5],
                    protoB: [9, 9, 8]
                }
            },
            blueprint: {
                'box-data': '<h3>Data Ingestion & Policy</h3><p>This component of the "Harness" is responsible for all external data connections. It validates, cleans, and standardizes data *before* it is ever passed to the Core. It also enforces high-level business rules and policies (e.g., "do not trade X asset").</p>',
                'box-gov': '<h3>Governance & Audit</h3><p>The central logger for the entire system. It records every action taken by the Harness and every model version promoted by the Core. This provides a single, immutable source of truth for compliance and reproducibility, fulfilling all audit requirements.</p>',
                'box-deploy': '<h3>Orchestration & Deployment</h3><p>This "Harness" component manages the lifecycle of the "Core" engine. It handles spinning up the process, feeding it data, receiving its predictions, and managing A/B testing or blue/green deployments of new evolutionary models.</p>',
                'box-core': '<h3>The "Core" Engine</h3><p>The "Core" is a single, high-performance process (not a service). Its only job is to adapt. It receives data from the Harness and uses its internal meta-learning loop to evolve its own prediction logic. It is optimized for speed and adaptivity, not for governance.</p>'
            }
        };

        const wrapLabel = (label, maxWidth = 16) => {
            if (!label) return '';
            if (label.length <= maxWidth) {
                return label;
            }
            const words = label.split(' ');
            const lines = [];
            let currentLine = '';
            for (const word of words) {
                if ((currentLine + ' ' + word).trim().length > maxWidth && currentLine.length > 0) {
                    lines.push(currentLine);
                    currentLine = word;
                } else {
                    currentLine = (currentLine + ' ' + word).trim();
                }
            }
            if (currentLine.length > 0) {
                lines.push(currentLine);
            }
            return lines;
        };

        const tooltipTitleCallback = (tooltipItems) => {
            const item = tooltipItems[0];
            let label = item.chart.data.labels[item.dataIndex];
            if (Array.isArray(label)) {
                return label.join(' ');
            } else {
                return label;
            }
        };

        const chartJsOptions = {
            responsive: true,
            maintainAspectRatio: false,
            plugins: {
                tooltip: {
                    callbacks: {
                        title: tooltipTitleCallback
                    }
                },
                legend: {
                    position: 'bottom'
                }
            }
        };

        const chartJsRadarOptions = {
            ...chartJsOptions,
            scales: {
                r: {
                    beginAtZero: true,
                    max: 10,
                    pointLabels: {
                        font: { size: 13 }
                    }
                }
            }
        };
        
        const chartJsBarOptions = (yLabel) => ({
            ...chartJsOptions,
            scales: {
                x: { ticks: { autoSkip: false } },
                y: { beginAtZero: true, title: { display: true, text: yLabel } }
            }
        });

        let h1Chart, h4Chart, h5Chart, summaryRadarChart, detailBarChart;

        function initializeCharts() {
            const pAColor = 'rgba(87, 83, 78, 0.7)';
            const pBColor = 'rgba(234, 88, 12, 0.7)';
            
            const pABorder = 'rgba(87, 83, 78, 1)';
            const pBBorder = 'rgba(234, 88, 12, 1)';

            const h1Ctx = document.getElementById('h1Chart');
            if (h1Ctx) {
                h1Chart = new Chart(h1Ctx, {
                    type: 'bar',
                    data: {
                        labels: ['Inner-Loop Efficiency', 'Governance Score'],
                        datasets: [
                            { label: 'Prototype A (Traditional)', data: [2, 9], backgroundColor: pAColor, borderColor: pABorder, borderWidth: 1 },
                            { label: 'Prototype B (Evolutionary)', data: [9, 3], backgroundColor: pBColor, borderColor: pBBorder, borderWidth: 1 }
                        ]
                    },
                    options: chartJsBarOptions('Score (out of 10)')
                });
            }

            const h4Ctx = document.getElementById('h4Chart');
            if (h4Ctx) {
                h4Chart = new Chart(h4Ctx, {
                    type: 'radar',
                    data: {
                        labels: ['Auditability', 'Reproducibility', 'Lineage Tracking'],
                        datasets: [
                            { label: 'Prototype A (Traditional)', data: [9, 9, 8], backgroundColor: pAColor, borderColor: pABorder, borderWidth: 2, pointBackgroundColor: pABorder },
                            { label: 'Prototype B (Evolutionary)', data: [3, 2, 4], backgroundColor: pBColor, borderColor: pBBorder, borderWidth: 2, pointBackgroundColor: pBBorder }
                        ]
                    },
                    options: chartJsRadarOptions
                });
            }

            const h5Ctx = document.getElementById('h5Chart');
            if (h5Ctx) {
                h5Chart = new Chart(h5Ctx, {
                    type: 'bar',
                    data: {
                        labels: ['p95 Latency (ms)'],
                        datasets: [
                            { label: 'Prototype A (Traditional)', data: [85], backgroundColor: pAColor, borderColor: pABorder, borderWidth: 1 },
                            { label: 'Prototype B (Evolutionary)', data: [2], backgroundColor: pBColor, borderColor: pBBorder, borderWidth: 1 }
                        ]
                    },
                    options: chartJsBarOptions('Milliseconds (ms)')
                });
            }

            const summaryCtx = document.getElementById('summaryRadarChart');
            if (summaryCtx) {
                summaryRadarChart = new Chart(summaryCtx, {
                    type: 'radar',
                    data: {
                        labels: ['Model', 'Adaptivity', 'Systems', 'Governance', 'Complexity'],
                        datasets: [
                            { label: 'Prototype A (Traditional)', data: [4, 2, 3, 9, 3], backgroundColor: pAColor, borderColor: pABorder, borderWidth: 2, pointBackgroundColor: pABorder },
                            { label: 'Prototype B (Evolutionary)', data: [8, 9, 8, 3, 8], backgroundColor: pBColor, borderColor: pBBorder, borderWidth: 2, pointBackgroundColor: pBBorder }
                        ]
                    },
                    options: chartJsRadarOptions
                });
            }

            const detailCtx = document.getElementById('detailBarChart');
            if (detailCtx) {
                detailBarChart = new Chart(detailCtx, {
                    type: 'bar',
                    data: {
                        labels: [],
                        datasets: [
                            { label: 'Prototype A (Traditional)', data: [], backgroundColor: pAColor, borderColor: pABorder, borderWidth: 1 },
                            { label: 'Prototype B (Evolutionary)', data: [], backgroundColor: pBColor, borderColor: pBBorder, borderWidth: 1 }
                        ]
                    },
                    options: chartJsBarOptions('Metric Value')
                });
            }
        }

        function showSection(targetId) {
            document.querySelectorAll('.content-section').forEach(section => {
                section.classList.add('hidden');
            });
            const targetSection = document.getElementById(targetId);
            if(targetSection) {
                targetSection.classList.remove('hidden');
            }

            document.querySelectorAll('.nav-button').forEach(button => {
                button.classList.remove('active');
            });
            const activeButton = document.querySelector(`.nav-button[data-target="${targetId}"]`);
            if(activeButton) {
                activeButton.classList.add('active');
            }
        }

        function showHypothesis(targetId) {
            const hypothesis = appData.hypotheses[targetId];
            if (!hypothesis) return;

            document.getElementById('hypothesis-text-display').innerHTML = hypothesis.text;

            document.querySelectorAll('.hypothesis-visual').forEach(visual => {
                visual.classList.add('hidden');
            });
            const targetVisual = document.getElementById(hypothesis.visual);
            if(targetVisual) {
                targetVisual.classList.remove('hidden');
            }

            document.querySelectorAll('.hypothesis-button').forEach(button => {
                button.classList.remove('active');
            });
            const activeButton = document.querySelector(`.hypothesis-button[data-target="${targetId}"]`);
            if(activeButton) {
                activeButton.classList.add('active');
            }
        }

        function updateDetailChart() {
            const selectedCategory = document.getElementById('benchmark-select').value;
            const data = appData.benchmarks[selectedCategory];
            if (!data) return;

            const wrappedLabels = data.labels.map(label => wrapLabel(label, 16));
            
            detailBarChart.data.labels = wrappedLabels;
            detailBarChart.data.datasets[0].data = data.protoA;
            detailBarChart.data.datasets[1].data = data.protoB;
            detailBarChart.update();

            document.getElementById('benchmark-text-display').innerHTML = data.summary;
        }

        function showBlueprintAnnotation(targetId) {
            const annotation = appData.blueprint[targetId];
            const display = document.getElementById('blueprint-annotation-display');
            if (annotation && display) {
                display.innerHTML = annotation;
            }
        }

        window.addEventListener('DOMContentLoaded', () => {
            initializeCharts();

            document.querySelectorAll('.nav-button').forEach(button => {
                button.addEventListener('click', () => {
                    showSection(button.dataset.target);
                });
            });

            document.querySelectorAll('.hypothesis-button').forEach(button => {
                button.addEventListener('click', () => {
                    showHypothesis(button.dataset.target);
                });
            });

            document.getElementById('benchmark-select').addEventListener('change', updateDetailChart);
            
            document.querySelectorAll('.blueprint-box').forEach(box => {
                box.addEventListener('click', () => {
                    showBlueprintAnnotation(box.id);
                });
            });
            document.getElementById('box-core').addEventListener('click', () => {
                showBlueprintAnnotation('box-core');
            });

            showSection('content-intro');
            showHypothesis('h1');
            updateDetailChart();
            showBlueprintAnnotation('box-data');
        });

    </script>
</body>
</html>
```