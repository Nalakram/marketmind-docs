import abc
from _typeshed import Incomplete
from abc import ABC, abstractmethod
from functools import singledispatch
from srcPy.utils.optional_imports import pl
from typing import Any

logger: Incomplete
ANONYMIZERS: dict[str, type['Anonymizer']]

def register_anonymizer(anon_type: str): ...

class Anonymizer(ABC, metaclass=abc.ABCMeta):
    @abstractmethod
    def apply(self, df: pl.DataFrame | pl.LazyFrame, columns: list[str]) -> pl.DataFrame | pl.LazyFrame: ...

class AnonymizationManager:
    config: Incomplete
    anonymizers: dict[str, Anonymizer]
    max_workers: Incomplete
    def __init__(self, config, max_workers: int = 8) -> None: ...
    def add_anonymizer(self, anon_type: str, anonymizer: Anonymizer): ...
    @singledispatch
    def anonymize(self, data: Any, columns: dict[str, list[str]] | None = None, eager: bool = False) -> Any: ...
    @anonymize.register
    def _(self, df: pl.LazyFrame, columns: dict[str, list[str]] | None = None, eager: bool = False) -> pl.LazyFrame: ...
    @anonymize.register
    def _(self, df: pl.DataFrame, columns: dict[str, list[str]] | None = None, eager: bool = False) -> pl.DataFrame: ...
    @anonymize.register
    def _(self, dfs: dict, columns: dict[str, list[str]] | None = None, eager: bool = False) -> dict: ...

class MaskingAnonymizer(Anonymizer):
    mask_char: Incomplete
    def __init__(self, config: dict | None = None) -> None: ...
    def apply(self, df: pl.DataFrame | pl.LazyFrame, columns: list[str]) -> pl.DataFrame | pl.LazyFrame: ...

class HashingAnonymizer(Anonymizer):
    algorithm: Incomplete
    def __init__(self, config: dict | None = None) -> None: ...
    def apply(self, df: pl.DataFrame | pl.LazyFrame, columns: list[str]) -> pl.DataFrame | pl.LazyFrame: ...

class DPAnonymizer(Anonymizer):
    epsilon: Incomplete
    def __init__(self, config: dict | None = None) -> None: ...
    def apply(self, df: pl.DataFrame | pl.LazyFrame, columns: list[str]) -> pl.DataFrame | pl.LazyFrame: ...
